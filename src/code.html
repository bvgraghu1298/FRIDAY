<link rel="stylesheet" href="friday.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<h1 > F.R.I.D.A.Y </h1>
<table id="myTable"><tbody id="myTable1">
<tr ><th></th><th></th></tr>
<tr><td ></td><td id="3">Hey FRIDAY!</td></tr><tr><td id="4">Hello Boss! Welcome back.</td></tr>
<!-- <tr><td></td><td>What's up?</td></tr><tr><td>You have a date with Sindhu today! </td></tr>
<tr><td></td><td>Do you think she falls for me?</td></tr><tr><td>If I were her, I would definitely fall for you!</td></tr> -->
</tbody>
</table>
<div class="view">
    <input type="text" placeholder="Enter your message" id="1"><br>
    <br>
    <div class="viewbutton">
        <button id = "vo" class = "voice" onclick="getUserMessage(this)">Voice       <i style="font-size:20px" class="fa">&#xf130;</i></button>
        <button id="text" class="send"  onclick="getUserMessage(this)" >Send</button>
    </div>
<p id="chat"></p>
</div>
<script>

     function voiceInputOver(){
    
    
        // var message = new SpeechSynthesisUtterance('Hello Sir! Welcome back. How may I assist you?');
        // window.speechSynthesis.speak(message);
     }
    function getUserMessage(){
        var input = document.getElementById("1");

// Execute a function when the user releases a key on the keyboard
input.addEventListener("keyup", function(event) {
  // Number 13 is the "Enter" key on the keyboard
  if (event.keyCode === 13) {
    // Cancel the default action, if needed
    event.preventDefault();
    // Trigger the button element with a click
    document.getElementById("myBtn").click();
  }
});
    //     var SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    //     var recognition = new SpeechRecognition();

    //     recognition.continuous = true;

    //     recognition.onend = function() {
    //     recognition.start();
    // }

    // recognition.onresult = function(event) {
    // var current = event.resultIndex;
    // var transcript = event.results[current][0].transcript;
    // docucment.getElementById("1").value = transcript;
    // speak(transcript)
    // }

    // recognition.start();
    //     if transcript{
    //         userMessage=transcript
    //     }
    //     else{
        var userMessage = document.getElementById(1).value;
        
        document.getElementById("3").innerHTML=userMessage; 
        // let userMessage2 = document.getElementById(2).value;
        pywebview.api.sendAIML(userMessage).then(showOutput);
        pywebview.api.intents(userMessage);
        
        
    }
    // function sumInPython(){
    //     let n1 = parseInt(prompt("Enter an integer"));
    //     let n2 = parseInt(prompt("Enter an integer"));
    
    //     // pass this object as arguments for simplicity
    //     let args = {
    //         a : n1,
    //         b : n2
    //     }

    //     // execute python function to perform backend operation
    //     // format : pywebview.api.<function-name>(<arguments-object>).then(return-value-handling-function);
    //     pywebview.api.sum(args).then(showOutput);
        
    // }

    function showOutput(output,userMessage){
        // this function will handle the return value
        
        document.getElementById("4").innerHTML=output;
        var table = document.getElementById("myTable");
        // table.stle.visibility = "visible";
        var tableRef = document.getElementById('myTable1').getElementsByTagName('tbody')[1];
        var newRow   = tableRef.insertRow(tableRef.rows.length);
        newRow.innerHTML = userMessage;

        // var row = table.insertRow(0);
        // var cell1 = row.insertCell(0);
        // var cell2 = row.insertCell(1);
        // cell1.innerHTML = output;
        // cell2.innerHTML = userMessage;
        return output
      
    }
function view(output, userMessage){
 
}
    function sayHello(){
        alert("hello");
    }
</script>
